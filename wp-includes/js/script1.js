!function(a){function b(b,c,d){a("#tmdb-"+b).html("<div class=\"itm-exists\">"+dtAjax.loading+"</div>"),a.ajax({url:dtAjax.url,type:"POST",data:{id:b,type:c,nonce:d,action:"dbmovies_post_requests"},error:function(a){console.log(a)},success:function(c){console.log(c),a("#tmdb-"+b).html("<div class=\"itm-exists\">"+dtAjax.ready+"</div>")}})}function c(){var c=a("#term").val(),d=a("#page").val(),e=a("#type").val(),f=a("#nonce").val(),g=a("#action").val();a("#get_requests").find("span").addClass("icons-spinner9").addClass("loading"),a.ajax({url:dtAjax.url,type:"POST",data:{type:e,term:c,page:d,nonce:f,action:g},error:function(a){console.log(a)},success:function(c){a("#get_requests").find("span").removeClass("icons-spinner9").removeClass("loading"),a("#discover_results").html(c),a(".get_content_dbmovies").click(function(){var c=a(this).data("id"),d=a(this).data("type"),e=a(this).data("nonce");b(c,d,e)})}})}var d=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}(),e=!1;enterActive=!0,a("input[name=\"s\"]").on("input",function(){var b=this.value;d(function(){return 2>=b.length?(a(dtGonza.area).hide(),void a(dtGonza.button).find("span").removeClass("icons-spinner9").removeClass("loading")):void(!e&&(e=!0,!0==dtGonza.livesearchactive&&(a(dtGonza.button).find("span").addClass("icons-spinner9").addClass("loading"),a(dtGonza.area).find("ul").addClass("process").addClass("noselect"),a.ajax({type:"GET",url:dtGonza.api,data:"keyword="+b+"&nonce="+dtGonza.nonce,dataType:"json",success:function(c){if(c.error)return void a(dtGonza.area).hide();a(dtGonza.area).show();var d=dtGonza.more.replace("%s","<span class=\"icon-search-1\">"+b+"</span>");moreText2="<li class=\"ctsv\"><a class=\"more live_search_click\" data-search=\"form-search-resp\">"+d+"</a></li>";var e=[];a.each(c,function(a,b){name="",date="",imdb="",!1!==b.extra.date&&(date="<span class=\"release\">("+b.extra.date+")</span>"),!1!==b.extra.imdb&&(imdb="<div class=\"imdb\"><span class=\"icon-star\"></span> "+b.extra.imdb+"</div>"),e.push("<li id=\""+a+"\"><a href=\""+b.url+"\" class=\"clearfix\"><div class=\"poster\"><img src=\""+b.img+"\" /></div><div class=\"title\">"+b.title+date+"</div>"+imdb+"</a></li>")}),a(dtGonza.area).html("<ul>"+e.join("")+("<li class=\"ctsx\"><a class=\"more live_search_click\" data-search=\"searchform\">"+d+"</a></li>")+"</ul>")},complete:function(){e=!1,enterActive=!1,a(dtGonza.button).find("span").removeClass("icons-spinner9").removeClass("loading"),a(dtGonza.area).find("ul").removeClass("process").removeClass("noselect")}}))))},500)}),a(document).on("click",".live_search_click",function(){var b=a(this).data("search");!1!=b&&a("#"+b).submit()}),a(document).on("keypress","#search-form",function(a){if(enterActive)return 13!=a.keyCode}),a(document).click(function(){a(event.target);0==a(event.target).closest("input[name=\"s\"]").length?a(dtGonza.area).hide():a(dtGonza.area).show(),0==a(event.target).closest(".lglossary").length?(a(".items_glossary").hide(),a(".lglossary").removeClass("active")):a(".items_glossary").show()}),a(document).on("click",".post-request",function(){a(".post_request").show(),a("#post_request_archive").html("<div class=\"load_event\">"+dtAjax.loading+"</div>");var b=a(this).data("id");a.ajax({url:dtAjax.url,type:"POST",data:{id:b,action:"dbmovies_post_archive"},error:function(a){console.log(a)},success:function(b){a("#post_request_archive").html(b),a(".backdrop").click(function(){a(".post_request").hide()})}})}),a("#discover_requests").keyup(function(){return d(function(){c()},500),!1}),a("#discover_requests").submit(function(){return c(),!1}),a(document).on("click",".lglossary",function(){var b=a(this).data("glossary"),c=a(this).data("type");a(".lglossary").removeClass("active"),a(this).addClass("active"),a(".items_glossary").show(),a(".items_glossary").html("<div class=\"load\"><i class=\"icons-spinner9 loading\"></i></div>"),a.ajax({type:"GET",url:dtGonza.glossary,data:"term="+b+"&nonce="+dtGonza.nonce+"&type="+c,dataType:"json",success:function(b){if(b.error)return a(".items_glossary").hide(),void a(".lglossary").removeClass("active");a(".items_glossary").show();var c=[];a.each(b,function(a,b){imdb="",!1!==b.imdb&&(imdb="<div class=\"rating\"><i class=\"icon-star\"></i> "+b.imdb+"</div>"),c.push("<div id=\""+a+"\" class=\"item\"><a href=\""+b.url+"\"><div class=\"poster\"><img src=\""+b.img+"\"/>"+imdb+"</div></a><div class=\"data\"><h3>"+b.title+"</h3><span>"+b.year+"</span></div></div>")}),a(".items_glossary").html("<div class=\"items animation-2\">"+c.join("")+"</div>")}})}),a(document).keyup(function(b){27==b.keyCode&&(a(".post_request").hide(),a(".items_glossary").hide(),a(".items_glossary").html(" "),a(".lglossary").removeClass("active")),39==b.keyCode&&a("#nextpagination").trigger("click"),37==b.keyCode&&a("#prevpagination").trigger("click")})}(jQuery);